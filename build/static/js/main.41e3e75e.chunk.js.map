{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","filter","onChange","handleFilterChange","Notification","message","undefined","type","className","text","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","Persons","person","deletePerson","style","margin","name","number","onClick","baseUrl","axios","get","then","response","data","newPerson","post","id","newObject","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","personService","initialPersons","personsToShow","trim","toLowerCase","indexOf","event","target","preventDefault","findIndex","contact","window","confirm","changedContact","console","log","returnedContact","map","setTimeout","catch","error","changeNumber","find","personObject","createdPerson","concat","i","Person","key","personRemoved","deleteContact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.41e3e75e.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n  return (\n    <div>\n      {\"filter shown with \"}\n      <input value={props.filter} onChange={props.handleFilterChange} />\n    </div> \n  )\n}\n  \nexport default Filter","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message.type === undefined) {\n    return null\n  }\n  else if (message.type === 'notificationMessage') {\n    return (\n      <div className=\"notification\">\n        {message.text}\n      </div>\n    )\n  }\n  else {\n    return (\n      <div className=\"error\">\n        {message.text}\n      </div>\n    )\n  }\n}\n\nexport default Notification","import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.addName}>\n      <div>{\"name: \"}\n        <input value={props.newName} onChange={props.handleNameChange} />\n      </div>\n      <div>{\"number: \"}\n        <input value={props.newNumber} onChange={props.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ person, deletePerson }) => {\n  return (\n    <p style={{margin: 1}}>\n      {`${person.name} ${person.number} `}\n      <button onClick={deletePerson}>delete</button>\n    </p>\n  )\n}\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n  const request = axios.post(baseUrl, newPerson)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport PersonForm from './components/PersonForm'\nimport Person from './components/Person'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ message, setMessage ] = useState({})\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const deleteContact = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)){\n      personService\n        .remove(person.id)\n        .then(() => {\n          const personRemoved = persons\n                                  .filter(contact => \n                                    contact.id !== person.id)\n          setPersons(personRemoved)\n          const message = {\n            text: `Removed ${person.name}`,\n            type: \"notificationMessage\"\n          }\n          console.log(message)\n          setMessage(message)\n          setTimeout(() => {\n            setMessage({})\n          }, 5000)\n      })\n    }\n  }\n\n  const changeNumber = (contact) => {\n    const message = `${contact.name} is already added to the phonebook, replace the old number with a new one?`\n\n    if (window.confirm(message)) {\n      const changedContact = {...contact, number: newNumber.trim()}\n      console.log(changedContact)\n      \n      personService\n        .update(contact.id, changedContact)\n        .then(returnedContact => {\n          setPersons(persons.map(person => person.id !== contact.id\n                                                     ? person\n                                                     : returnedContact))\n          const message = {\n            text: `Number for ${contact.name} was changed`,\n            type: \"notificationMessage\"\n          }\n          setMessage(message)\n          setTimeout(() => {\n            setMessage({})\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          const message = {\n            text: ` ${error.response.data.error}`,\n            type: \"errorMessage\"\n          }\n          setMessage(message)\n          setTimeout(() => {\n            setMessage({})\n          }, 5000)\n          personService\n            .getAll()\n            .then(response => setPersons(response))\n        })\n      \n    }\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    const name = newName.trim()\n    \n    if ( name === \"\") {\n      setNewName('')\n    }\n    else if (persons.findIndex(person => person.name === name) > -1) {\n      changeNumber(persons.find(person => person.name === name))\n    }\n    else {\n      const personObject = {\n        name,\n        number: newNumber.trim()\n      }\n\n      personService\n        .create(personObject)\n        .then(createdPerson => {\n          setPersons(persons.concat(createdPerson))\n          setNewName('')\n          setNewNumber('')\n          const message = {\n            text: `Added ${personObject.name}`,\n            type: \"notificationMessage\"\n          }\n          setMessage(message)\n          setTimeout(() => {\n            setMessage({})\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response)\n          const message = {\n            text: `${error.response.data.error}`,\n            type: \"errorMessage\"\n          }\n          setMessage(message)\n          setTimeout(() => {\n           setMessage({}) \n          }, 5000)\n        })\n    } \n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const personsToShow = (filter.trim() === \"\")\n    ? persons\n    : persons.filter(person => person.name\n                               .toLowerCase()\n                               .indexOf(filter\n                               .trim()\n                               .toLowerCase()) !== -1)\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filter={filter} handleFilterChange={handleFilterChange} /> \n      <h2>Add a new contact</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Contacts</h2>\n      <div>\n        {personsToShow.map((person, i) => \n          <Person \n            key={i}\n            person={person}\n            deletePerson={() => deleteContact(person)}\n          />\n        )}\n      </div>\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}